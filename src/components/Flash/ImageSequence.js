import React, { forwardRef } from "react";

import { Skeleton } from "./skeleton";
import { img } from "./imgIndex";
import { useImage } from "./hooks";



const FlashArray = () => {
  const [AA1, AA1S] = useImage(img[0]);
  const [AA2, AA2S] = useImage(img[1]);
  const [AA3, AA3S] = useImage(img[2]);
  const [AA4, AA4S] = useImage(img[3]);
  const [AA5, AA5S] = useImage(img[4]);
  const [AA6, AA6S] = useImage(img[5]);
  const [AA7, AA7S] = useImage(img[6]);
  const [AA8, AA8S] = useImage(img[7]);
  const [AA9, AA9S] = useImage(img[8]);
  const [AA10, AA10S] = useImage(img[9]);
  const [AA11, AA11S] = useImage(img[10]);
  const [AA12, AA12S] = useImage(img[11]);
  const [AA13, AA13S] = useImage(img[12]);
  const [AA14, AA14S] = useImage(img[13]);
  const [AA15, AA15S] = useImage(img[14]);
  const [AA16, AA16S] = useImage(img[15]);
  const [AA17, AA17S] = useImage(img[16]);
  const [AA18, AA18S] = useImage(img[17]);
  const [AA19, AA19S] = useImage(img[18]);
  const [AA20, AA20S] = useImage(img[19]);
  const [AA21, AA21S] = useImage(img[20]);
  const [AA22, AA22S] = useImage(img[21]);
  const [AA23, AA23S] = useImage(img[22]);
  const [AA24, AA24S] = useImage(img[23]);
  const [AA25, AA25S] = useImage(img[24]);
  const [AA26, AA26S] = useImage(img[25]);
  const [AA27, AA27S] = useImage(img[26]);
  const [AA28, AA28S] = useImage(img[27]);
  const [AA29, AA29S] = useImage(img[28]);
  const [AA30, AA30S] = useImage(img[29]);
  const [AA31, AA31S] = useImage(img[30]);
  const [AA32, AA32S] = useImage(img[31]);
  const [AA33, AA33S] = useImage(img[32]);
  const [AA34, AA34S] = useImage(img[33]);
  const [AA35, AA35S] = useImage(img[34]);
  const [AA36, AA36S] = useImage(img[35]);
  const [AA37, AA37S] = useImage(img[36]);
  const [AA38, AA38S] = useImage(img[37]);
  const [AA39, AA39S] = useImage(img[38]);
  const [AA40, AA40S] = useImage(img[39]);
  const [AA41, AA41S] = useImage(img[40]);
  const [AA42, AA42S] = useImage(img[41]);
  const [AA43, AA43S] = useImage(img[42]);
  const [AA44, AA44S] = useImage(img[43]);
  const [AA45, AA45S] = useImage(img[44]);
  const [AA46, AA46S] = useImage(img[45]);
  const [AA47, AA47S] = useImage(img[46]);
  const [AA48, AA48S] = useImage(img[47]);
  const [AA49, AA49S] = useImage(img[48]);
  const [AA50, AA50S] = useImage(img[49]);
  const [AA51, AA51S] = useImage(img[50]);
  const [AA52, AA52S] = useImage(img[51]);
  const [AA53, AA53S] = useImage(img[52]);
  const [AA54, AA54S] = useImage(img[53]);
  const [AA55, AA55S] = useImage(img[54]);
  const [AA56, AA56S] = useImage(img[55]);
  const [AA57, AA57S] = useImage(img[56]);
  const [AA58, AA58S] = useImage(img[57]);
  const [AA59, AA59S] = useImage(img[58]);
  const [AA60, AA60S] = useImage(img[59]);
  const [AA61, AA61S] = useImage(img[60]);
  const [AA62, AA62S] = useImage(img[61]);
  const [AA63, AA63S] = useImage(img[62]);
  const [AA64, AA64S] = useImage(img[63]);
  const [AA65, AA65S] = useImage(img[64]);
  const [AA66, AA66S] = useImage(img[65]);
  const [AA67, AA67S] = useImage(img[66]);
  const [AA68, AA68S] = useImage(img[67]);
  const [AA69, AA69S] = useImage(img[68]);
  const [AA70, AA70S] = useImage(img[69]);
  const [AA71, AA71S] = useImage(img[70]);
  const [AA72, AA72S] = useImage(img[71]);
  const [AA73, AA73S] = useImage(img[72]);
  const [AA74, AA74S] = useImage(img[73]);
  const [AA75, AA75S] = useImage(img[74]);
  const [AA76, AA76S] = useImage(img[75]);
  const [AA77, AA77S] = useImage(img[76]);
  const [AA78, AA78S] = useImage(img[77]);
  const [AA79, AA79S] = useImage(img[78]);
  const [AA80, AA80S] = useImage(img[79]);
  const [AA81, AA81S] = useImage(img[80]);
  const [AA82, AA82S] = useImage(img[81]);
  const [AA83, AA83S] = useImage(img[82]);
  const [AA84, AA84S] = useImage(img[83]);
  const [AA85, AA85S] = useImage(img[84]);
  const [AA86, AA86S] = useImage(img[85]);
  const [AA87, AA87S] = useImage(img[86]);
  const [AA88, AA88S] = useImage(img[87]);
  const [AA89, AA89S] = useImage(img[88]);
  const [AA90, AA90S] = useImage(img[89]);
  const [AA91, AA91S] = useImage(img[90]);
  const [AA92, AA92S] = useImage(img[91]);
  const [AA93, AA93S] = useImage(img[92]);
  const [AA94, AA94S] = useImage(img[93]);
  const [AA95, AA95S] = useImage(img[94]);
  const [AA96, AA96S] = useImage(img[95]);
  const [AA97, AA97S] = useImage(img[96]);
  const [AA98, AA98S] = useImage(img[97]);
  const [AA99, AA99S] = useImage(img[98]);
  const [AA100, AA100S] = useImage(img[99]);
  const [AA101, AA101S] = useImage(img[100]);
  const [AA102, AA102S] = useImage(img[101]);
  const [AA103, AA103S] = useImage(img[102]);
  const [AA104, AA104S] = useImage(img[103]);
  const [AA105, AA105S] = useImage(img[104]);
  const [AA106, AA106S] = useImage(img[105]);
  const [AA107, AA107S] = useImage(img[106]);
  const [AA108, AA108S] = useImage(img[107]);
  const [AA109, AA109S] = useImage(img[108]);
  const [AA110, AA110S] = useImage(img[109]);
  const [AA111, AA111S] = useImage(img[110]);
  const [AA112, AA112S] = useImage(img[111]);
  const [AA113, AA113S] = useImage(img[112]);
  const [AA114, AA114S] = useImage(img[113]);
  const [AA115, AA115S] = useImage(img[114]);
  // const [AA116, AA116S] = useImage(img[115]);
  // const [AA117, AA117S] = useImage(img[116]);
  const [AA118, AA118S] = useImage(img[117]);
  const [AA119, AA119S] = useImage(img[118]);
  const [AA120, AA120S] = useImage(img[119]);
  const [AA121, AA121S] = useImage(img[120]);
  const [AA122, AA122S] = useImage(img[121]);
  const [AA123, AA123S] = useImage(img[122]);
  const [AA124, AA124S] = useImage(img[123]);
  const [AA125, AA125S] = useImage(img[124]);
  const [AA126, AA126S] = useImage(img[125]);
  const [AA127, AA127S] = useImage(img[126]);
  const [AA128, AA128S] = useImage(img[127]);
  const [AA129, AA129S] = useImage(img[128]);
  const [AA130, AA130S] = useImage(img[129]);
  const [AA131, AA131S] = useImage(img[130]);
  const [AA132, AA132S] = useImage(img[131]);
  const [AA133, AA133S] = useImage(img[132]);
  const [AA134, AA134S] = useImage(img[133]);
  const [AA135, AA135S] = useImage(img[134]);
  const [AA136, AA136S] = useImage(img[135]);
  const [AA137, AA137S] = useImage(img[136]);
  const [AA138, AA138S] = useImage(img[137]);
  const [AA139, AA139S] = useImage(img[138]);
  const [AA140, AA140S] = useImage(img[139]);
  const [AA141, AA141S] = useImage(img[140]);
  const [AA142, AA142S] = useImage(img[141]);
  const [AA143, AA143S] = useImage(img[142]);
  const [AA144, AA144S] = useImage(img[143]);
  const [AA145, AA145S] = useImage(img[144]);
  const [AA146, AA146S] = useImage(img[145]);
  const [AA147, AA147S] = useImage(img[146]);
  const [AA148, AA148S] = useImage(img[147]);
  const [AA149, AA149S] = useImage(img[148]);
  const [AA150, AA150S] = useImage(img[149]);
  const [AA151, AA151S] = useImage(img[150]);
  const [AA152, AA152S] = useImage(img[151]);
  const [AA153, AA153S] = useImage(img[152]);
  const [AA154, AA154S] = useImage(img[153]);
  const [AA155, AA155S] = useImage(img[154]);
  const [AA156, AA156S] = useImage(img[155]);
  const [AA157, AA157S] = useImage(img[156]);
  const [AA158, AA158S] = useImage(img[157]);
  const [AA159, AA159S] = useImage(img[158]);
  const [AA160, AA160S] = useImage(img[159]);
  const [AA161, AA161S] = useImage(img[160]);
  const [AA162, AA162S] = useImage(img[161]);
  
  const newImages = Array.of(
    [AA1, AA1S],
    [AA2, AA2S],
    [AA3, AA3S],
    [AA4, AA4S],
    [AA5, AA5S],
    [AA6, AA6S],
    [AA7, AA7S],
    [AA8, AA8S],
    [AA9, AA9S],
    [AA10, AA10S],
    [AA11, AA11S],
    [AA12, AA12S],
    [AA13, AA13S],
    [AA14, AA14S],
    [AA15, AA15S],
    [AA16, AA16S],
    [AA17, AA17S],
    [AA18, AA18S],
    [AA19, AA19S],
    [AA20, AA20S],
    [AA21, AA21S],
    [AA22, AA22S],
    [AA23, AA23S],
    [AA24, AA24S],
    [AA25, AA25S],
    [AA26, AA26S],
    [AA27, AA27S],
    [AA28, AA28S],
    [AA29, AA29S],
    [AA30, AA30S],
    [AA31, AA31S],
    [AA32, AA32S],
    [AA33, AA33S],
    [AA34, AA34S],
    [AA35, AA35S],
    [AA36, AA36S],
    [AA37, AA37S],
    [AA38, AA38S],
    [AA39, AA39S],
    [AA40, AA40S],
    [AA41, AA41S],
    [AA42, AA42S],
    [AA43, AA43S],
    [AA44, AA44S],
    [AA45, AA45S],
    [AA46, AA46S],
    [AA47, AA47S],
    [AA48, AA48S],
    [AA49, AA49S],
    [AA50, AA50S],
    [AA51, AA51S],
    [AA52, AA52S],
    [AA53, AA53S],
    [AA54, AA54S],
    [AA55, AA55S],
    [AA56, AA56S],
    [AA57, AA57S],
    [AA58, AA58S],
    [AA59, AA59S],
    [AA60, AA60S],
    [AA61, AA61S],
    [AA62, AA62S],
    [AA63, AA63S],
    [AA64, AA64S],
    [AA65, AA65S],
    [AA66, AA66S],
    [AA67, AA67S],
    [AA68, AA68S],
    [AA69, AA69S],
    [AA70, AA70S],
    [AA71, AA71S],
    [AA72, AA72S],
    [AA73, AA73S],
    [AA74, AA74S],
    [AA75, AA75S],
    [AA76, AA76S],
    [AA77, AA77S],
    [AA78, AA78S],
    [AA79, AA79S],
    [AA80, AA80S],
    [AA81, AA81S],
    [AA82, AA82S],
    [AA83, AA83S],
    [AA84, AA84S],
    [AA85, AA85S],
    [AA86, AA86S],
    [AA87, AA87S],
    [AA88, AA88S],
    [AA89, AA89S],
    [AA90, AA90S],
    [AA91, AA91S],
    [AA92, AA92S],
    [AA93, AA93S],
    [AA94, AA94S],
    [AA95, AA95S],
    [AA96, AA96S],
    [AA97, AA97S],
    [AA98, AA98S],
    [AA99, AA99S],
    [AA100, AA100S],
    [AA101, AA101S],
    [AA102, AA102S],
    [AA103, AA103S],
    [AA104, AA104S],
    [AA105, AA105S],
    [AA106, AA106S],
    [AA107, AA107S],
    [AA108, AA108S],
    [AA109, AA109S],
    [AA110, AA110S],
    [AA111, AA111S],
    [AA112, AA112S],
    [AA113, AA113S],
    [AA114, AA114S],
    [AA115, AA115S],
    // [AA116, AA116S],
    // [AA117, AA117S],
    [AA118, AA118S],
    [AA119, AA119S],
    [AA120, AA120S],
    [AA121, AA121S],
    [AA122, AA122S],
    [AA123, AA123S],
    [AA124, AA124S],
    [AA125, AA125S],
    [AA126, AA126S],
    [AA127, AA127S],
    [AA128, AA128S],
    [AA129, AA129S],
    [AA130, AA130S],
    [AA131, AA131S],
    [AA132, AA132S],
    [AA133, AA133S],
    [AA134, AA134S],
    [AA135, AA135S],
    [AA136, AA136S],
    [AA137, AA137S],
    [AA138, AA138S],
    [AA139, AA139S],
    [AA140, AA140S],
    [AA141, AA141S],
    [AA142, AA142S],
    [AA143, AA143S],
    [AA144, AA144S],
    [AA145, AA145S],
    [AA146, AA146S],
    [AA147, AA147S],
    [AA148, AA148S],
    [AA149, AA149S],
    [AA150, AA150S],
    [AA151, AA151S],
    [AA152, AA152S],
    [AA153, AA153S],
    [AA154, AA154S],
    [AA155, AA155S],
    [AA156, AA156S],
    [AA157, AA157S],
    [AA158, AA158S],
    [AA159, AA159S],
    [AA160, AA160S],
    [AA161, AA161S],
    [AA162, AA162S]
  );
  return newImages;
};



const ImageSequence = forwardRef(({ progress }, ref) => {
  const newImages = FlashArray();

  let index = Math.round(progress * 1 * (newImages.length - 1));

  if (index >= newImages.length) {
    index = newImages.length - 1;
  }

  if (newImages[index][1] !== undefined) {
    if (newImages[index][1] === "loading") {
      return <Skeleton width="100%" height="100%" />;
    } else {
      return newImages.map((item, i) => (
        <span
          ref={ref}
          key={i}
          style={{
            display: i !== index ? "none" : "block",
            height: "100%",
            width: "100%",
            backgroundImage: `url('${item[0] ? item[0].src : null}')`,
            backgroundSize: "cover",
            backgroundPosition: "center"
          }}
        />
      ));
    }
  }
});


export default ImageSequence;
